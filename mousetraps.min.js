/* Mousetrap v1.6.5 craig.is/killing/mice */
/* Mousetraps multi keybind support by Daniel Brand */
!function(e,t,n){if(e){for(var r,i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},l={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},c=1;c<20;++c)i[111+c]="f"+c;for(c=0;c<=9;++c)i[c+96]=c.toString();y.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},y.prototype.unbind=function(e,t,n){return this._removeDirectMapHandler.call(this,e,n,t),this._removeCallback.call(this,e,n,t),this},y.prototype.trigger=function(e,t){let n=this._directMap[e+":"+t];if(n)for(let t of n)t({},e);return this},y.prototype.reset=function(){return this._callbacks={},this._directMap={},this},y.prototype.stopCallback=function(e,n){if((" "+n.className+" ").indexOf(" Mousetraps ")>-1)return!1;if(function e(n,r){return null!==n&&n!==t&&(n===r||e(n.parentNode,r))}(n,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var r=e.composedPath()[0];r!==e.target&&(n=r)}return"INPUT"==n.tagName||"SELECT"==n.tagName||"TEXTAREA"==n.tagName||n.isContentEditable},y.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},y.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);r=null},y.init=function(){var e=y(t);for(var n in e)"_"!==n.charAt(0)&&(y[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n))},y.init(),e.Mousetraps=y,"undefined"!=typeof module&&module.exports&&(module.exports=y),"function"==typeof define&&define.amd&&define(function(){return y})}function s(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function f(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return i[e.which]?i[e.which]:o[e.which]?o[e.which]:String.fromCharCode(e.which).toLowerCase()}function u(e,t){return e.sort().join(",")===t.sort().join(",")}function p(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function h(e,t,n){return n||(n=function(){if(!r)for(var e in r={},i)e>95&&e<112||i.hasOwnProperty(e)&&(r[i[e]]=e);return r}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function d(e,t){var n,r,i,o=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),i=0;i<n.length;++i)r=n[i],l[r]&&(r=l[r]),t&&"keypress"!=t&&a[r]&&(r=a[r],o.push("shift")),p(r)&&o.push(r);return{key:r,modifiers:o,action:t=h(r,o,t)}}function y(e){var n=this;if(e=e||t,!(n instanceof y))return new y(e);n.target=e,n._callbacks={},n._directMap={};var r,i={},o=!1,a=!1,l=!1;function c(e){e=e||[];var t,n=!1;for([t,callbacks]of Object.entries(i))for(let r of callbacks.keys())e[t]&&e[t].includes(r)?n=!0:i[t].set(r,0);n||(l=!1)}function h(e,t,r,i,o,a,l){var c,s,f=[],h=r.type;if(!n._callbacks[e])return[];for("keyup"==h&&p(e)&&(t=[e]),c=0;c<n._callbacks[e].length;++c)if(s=n._callbacks[e][c],(i||!s.seq||g(s.seq,s.originalCallback)==s.level)&&h==s.action&&("keypress"==h&&!r.metaKey&&!r.ctrlKey||u(t,s.modifiers))){if(l){let t=!i&&s.combo==o,r=i&&s.seq==i&&s.level==a;s.originalCallback===l&&(t||r)&&n._callbacks[e].splice(c,1)}f.push(s)}return f}function k(e,t,r,i){n.stopCallback(t,t.target||t.srcElement,r,i,e)||!1===e(t,r)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(t),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(t))}function m(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=f(e);t&&("keyup"!=e.type||o!==t?n.handleKey(t,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):o=!1)}function b(e,t){let n=i[e];n||(n=new Map);let r=n.get(t);void 0===r?r=0:++r,n.set(t,r),i[e]=n}function g(e,t){return i[e].get(t)}function v(e,t,n,i){function a(t){return function(){l=t,b(e,n),clearTimeout(r),r=setTimeout(c,1e3)}}function s(t){k(n,t,e),"keyup"!==i&&(o=f(t)),setTimeout(c,10)}b(e,n);for(var u=0;u<t.length;++u){var p=u+1===t.length?s:a(i||d(t[u+1]).action);w(t[u],p,i,e,u,n)}}function w(e,t,r,i,o,a){!function(e,t,r){let i=n._directMap[e+":"+t];i||(i=new Set),i.add(r),n._directMap[e+":"+t]=i}(e,r,t);var l,c=(e=e.replace(/\s+/g," ")).split(" ");if(c.length>1)return void v(e,c,t,r);l=d(e,r),n._callbacks[l.key]=n._callbacks[l.key]||[];let s=n._callbacks[l.key];for(let n of s)if(n.callback===t&&u(n.modifiers,l.modifiers)&&n.action===l.action&&n.seq===i&&n.level===o&&n.combo===e&&n.originalCallback===a)return;n._callbacks[l.key][i?"unshift":"push"]({callback:t,modifiers:l.modifiers,action:l.action,seq:i,level:o,combo:e,originalCallback:a})}n._removeDirectMapHandler=function(e,t,r){e=e instanceof Array?e:[e];for(let i of e){let e=n._directMap[i+":"+t];e&&(e.delete(r),n._directMap[i+":"+t]=e)}},n._removeCallback=function(e,t,n){e=e instanceof Array?e:[e];for(let r of e){let e=r.split(" "),i=e.length>1?r:null;for(let r=0;r<e.length;r++){let o=d(e[r],t);h(o.key,o.modifiers,{type:o.action},i,e[r],r,n)}}},n._handleKey=function(e,t,n){var r,i=h(e,t,n),o={},s=0,f=!1;for(r=0;r<i.length;++r)i[r].seq&&(s=Math.max(s,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=s)continue;f=!0;let e=o[i[r].seq];e||(e=[]),e.push(i[r].originalCallback),o[i[r].seq]=e,k(i[r].callback,n,i[r].combo,i[r].seq)}else f||k(i[r].callback,n,i[r].combo);var u="keypress"==n.type&&a;n.type!=l||p(e)||u||c(o),a=f&&"keydown"==n.type},n._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)w(e[r],t,n,null,null,t)},s(e,"keypress",m),s(e,"keydown",m),s(e,"keyup",m)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null);