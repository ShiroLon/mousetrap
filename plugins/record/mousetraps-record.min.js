!function(n){var t=[],e=null,o=[],r=!1,l=null,u=n.prototype.handleKey;function p(n){var t;for(t=0;t<o.length;++t)if(o[t]===n)return;o.push(n),1===n.length&&(r=!0)}function h(){t.push(o),o=[],r=!1,clearTimeout(l),l=setTimeout(f,1e3)}function f(){e&&(!function(n){var t;for(t=0;t<n.length;++t)n[t].sort(function(n,t){return n.length>1&&1===t.length?-1:1===n.length&&t.length>1?1:n>t?1:-1}),n[t]=n[t].join("+")}(t),e(t)),t=[],e=null,o=[]}n.prototype.record=function(n){var t=this;t.recording=!0,e=function(){t.recording=!1,n.apply(t,arguments)}},n.prototype.handleKey=function(){(function(n,t,e){if(this.recording){if("keydown"==e.type){for(1===n.length&&r&&h(),i=0;i<t.length;++i)p(t[i]);p(n)}else"keyup"==e.type&&o.length>0&&h();e.preventDefault()}else u.apply(this,arguments)}).apply(this,arguments)},n.init()}(Mousetraps);